{{ 'component-newsletter.css' | asset_url | stylesheet_tag }}
{{ 'newsletter-section.css' | asset_url | stylesheet_tag }}

<div class="newsletter color-{{ section.settings.section_color_scheme }}{% if section.settings.show_top_border %} main-top__border{% endif %}{% if section.settings.show_bottom_border %} main-bottom__border{% endif %}">
  <img
    class="newsletter-img"
    src="{{ section.settings.newsletter_img | image_url: width: 3840 }}"
    alt="{{ section.settings.newsletter_img.alt | escape }}"
    width="1920"
    height="610"
    loading="lazy">
 
    <div class="newsletter-box newsletter-form__box--{{ section.settings.newsletter_select }}">
      <div class="newsletter-form__container">
      <h4 class="newsletter-box__title">
        {{ section.settings.newsletter_title }}
      </h4>
      <p class="newsletter-box__text">
        {{ section.settings.newsletter_text }}
      </p>
      <div class="newsletter-form__box">
          {% form 'customer'
            , class: 'newsletter-form' %}
            <input
              type="hidden"
              name="contact[tags]"
              value="newsletter">
            <div
              class="newsletter-form__field-wrapper{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
              {% if settings.animations_reveal_on_scroll %}
              data-cascade
              style="--animation-order: {{ forloop.index }};"
              {% endif %}>
              <div class="field">
                <input
                  id="NewsletterForm--{{ section.id }}"
                  type="email"
                  name="contact[email]"
                  class="field__input"
                  value="{{ form.email }}"
                  aria-required="true"
                  autocorrect="off"
                  autocapitalize="off"
                  autocomplete="email"
                  {% if form.errors %}
                  autofocus
                  aria-invalid="true"
                  aria-describedby="Newsletter-error--{{ section.id }}"
                  {% elsif form.posted_successfully? %}
                  aria-describedby="Newsletter-success--{{ section.id }}"
                  {% endif %}
                  placeholder="Email"
                  >
                  {% comment %} <input
                  id="NewsletterForm--{{ section.id }}"
                  type="email"
                  name="contact[email]"
                  value="{{ form.email }}"
                  placeholder="Email"
                  > {% endcomment %}
                <button
                  type="submit"
                  class="newsletter-form__button field__button"
                  name="commit"
                  id="Subscribe"
                  aria-label="{{ 'newsletter.button_label' | t }}">
                  {% render 'icon-newsletter-arrov' %}
                </button>
              </div>
              {%- if form.errors -%}
                <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">
                  {%- render 'icon-error' -%}
                  {{- form.errors.translated_fields.email | capitalize }}
                  {{ form.errors.messages.email -}}
                </small>
              {%- endif -%}
            </div>
            {%- if form.posted_successfully? -%}
                          <h3
                            class="newsletter-form__message newsletter-form__message--success form__message"
                            id="Newsletter-success--{{ section.id }}"
                            tabindex="-1"
                            autofocus>
                            {% render 'icon-success' -%}
                            {{- 'newsletter.success' | t }}
                          </h3>
                      {%- endif -%}
          {% endform %}
        </div>
      </div>
    </div>

</div>

{% schema %}
  {
    "name": "t:sections.newsletter.name",
    "class": "newsletter-section",
    "settings": [
      {
        "type": "color_scheme",
        "id": "section_color_scheme",
        "label": "Color scheme",
        "default": "background-1"
      }, {
        "type": "image_picker",
        "id": "newsletter_img",
        "label": "Image"
      }, {
        "type": "text",
        "id": "newsletter_title",
        "label": "Heading",
        "default": "Heading"
      },
      {
        "type": "radio",
        "id": "newsletter_select",
        "label": "Content position",
        "options": [
          {
            "value": "left",
            "label": "Left"
          }, {
            "value": "centered",
            "label": "Centered"
          }, {
            "value": "right",
            "label": "Right"
          }
        ],
        "default": "right"
      }, {
        "type": "textarea",
        "id": "newsletter_text",
        "label": "Text",
        "default": "Text"
      }
    ],
    "presets": [
      {
        "name": "t:sections.newsletter.presets.name"
      }
    ]
  }
{% endschema %}